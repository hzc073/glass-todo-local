#  Glass Todo (Local Edition)

**支持局域网协作的私有化全栈任务管理系统**

Glass Todo Local 是一款基于 Node.js 开发的轻量级任务管理应用。它将专业的时间管理方法论（GTD + 四象限）与磨砂玻璃质感的现代化 UI 相结合，并在底层实现了完整的多用户权限与数据隔离机制。该项目专为注重隐私的个人、家庭或小型办公团队设计，支持本地及局域网部署，数据完全私有。

###  核心生产力功能 (Productivity)

**1. 📥 GTD 待办箱 (Inbox)**

* **捕捉灵感**：大脑是用来思考的，不是用来记事的。系统提供无日期的待办箱视图，专门用于收集没有明确截止时间、突发奇想的任务。
* **无压记录**：无需在创建时设置复杂的开始结束时间，先快速记录，后续再通过拖拽进行整理，保证心流不被打断。

**2.  强交互的“拖拽式”日历视图**

* **多维度展示**：支持**日、周、月**三种视图切换，满足从微观日程（今天几点开会）到宏观规划（本月重点）的所有需求。
* **时间块管理**：在日视图的时间轴上，任务以可视化的“时间块”呈现。
* **全拖拽交互**：
* **安排日程**：将待办箱的任务直接拖进时间轴即可定档。
* **调整时长**：支持按住任务块边缘上下拖动（Resize），精确调整任务的持续时长，实现分钟级规划。
* **移动时间**：会议改期？直接拖动任务块到新的时间槽，系统自动保存。



**3.  艾森豪威尔四象限 (Matrix)**

* **轻重缓急**：除了传统的列表，系统提供四象限视图。
* **可视化优先级**：支持将任务拖入“重要紧急”或“不重要不紧急”等区域，系统会自动用不同颜色（🔴 🔵 🟠 🟢）标记优先级，直观展示工作重心。

**4. 🏷️ 动态标签与多维筛选**

* **灵活分类**：支持多标签管理（如 #工作 #学习 #生活），点击侧边栏标签即可实时过滤视图，聚焦特定领域。
* **极速搜索**：顶部搜索栏支持实时检索，无论是标题还是标签，毫秒级响应。

**5.  数据统计与复盘**

* **可视化报表**：内置统计模块，自动生成周完成率、任务趋势图（柱状图），让你对自己的效率和产出趋势了如指掌。

---

###  高级技术特性 (Advanced Features)

**1.  全局深度搜索 (Deep Search)**

* **颗粒化子任务**：支持在主任务下创建无限条子任务，每条子任务拥有独立的 Checkbox 状态。
* **深入内容检索**：搜索引擎不仅检索主任务标题，**还能深入检索每一条子任务的具体内容**，确保任何细节都能被快速定位。

**2.  局域网多用户协作**

* **即插即用的团队服务**：服务端默认监听 `0.0.0.0`，部署在局域网内的一台电脑上后，同网络下的手机、平板或其他同事电脑均可通过 IP 地址直接访问。
* **严格的数据隔离**：基于 SQLite 数据库实现多用户架构，每个用户的任务数据、设置项在后端完全隔离，互不干扰。

---

###  管理员与运维 Q&A

针对团队部署场景，系统内置了完善的管理机制：

**Q: 如何初始化管理员权限？**
**A:** 系统遵循“首位即管理员”原则。数据库初始化后，**第一位注册的用户**将自动获得超级管理员权限，无需手动配置。

**Q: 如何控制团队成员注册？**
**A:** 系统默认关闭开放注册，仅允许持有**邀请码**的用户注册。管理员可在「设置 -> 管理员面板」中查看或刷新当前的邀请码，并将其分发给团队成员。

**Q: 管理员忘记密码如何处理？**
**A:** 服务端内置了 CLI 救援命令。在服务器终端运行以下命令，即可强制重置指定用户的密码并赋予其管理员权限：
`node server.js --reset-admin <用户名> <新密码>`。

---

###  技术架构与目录结构

本项目采用模块化、轻量级的全栈架构，无复杂依赖，结构清晰，易于维护和二次开发。

```text
glass-todo-local/
├── bin                     # 【环境层】内置 Node.js 二进制文件，确保解压即用
├── 启动.bat                # 【部署层】Windows 一键启动脚本
├── database.sqlite         # 【存储层】SQLite 本地数据库，包含用户表(users)与数据表(data)
├── server.js               # 【服务层】后端入口，负责路由分发、静态资源托管及 CLI 命令解析
├── server/
│   ├── db.js               # 【DAO层】数据库连接管理、表结构定义及自动迁移逻辑
│   └── auth.js             # 【中间件】负责 JWT/Token 鉴权、邀请码校验及管理员逻辑
└── public/
    ├── index.html          # 【视图层】单页应用 (SPA) 的 HTML 骨架
    ├── css/style.css       # 【样式层】统一定义磨砂玻璃 UI、响应式布局及动画效果
    └── js/                 # 【逻辑层】模块化设计
        ├── api.js          # 网络层：封装 Fetch 请求，处理 Auth Token 及错误拦截
        ├── calendar.js     # 视图层：封装日历计算、时间轴渲染及 Resize 交互逻辑
        ├── admin.js        # 管理层：封装管理员面板的用户列表与邀请码逻辑
        └── app.js          # 控制层：核心业务逻辑，协调搜索、拖拽、子任务及状态管理

```